/* Reset and isolate all styles within shadow DOM */
:host {
  all: initial;
  display: block;
  contain: layout style paint;
}

/* Ensure high-contrast text and placeholders within the shadow DOM */
.sidebar input, .sidebar textarea, .sidebar select {
  color: #111827 !important;
  caret-color: #111827;
  font-family: inherit !important;
}
.sidebar input::placeholder, .sidebar textarea::placeholder {
  color: #111827 !important;
  opacity: 1 !important;
}
.sidebar input::-webkit-input-placeholder, .sidebar textarea::-webkit-input-placeholder {
  color: #111827 !important;
  opacity: 1 !important;
}
.sidebar input::-moz-placeholder, .sidebar textarea::-moz-placeholder {
  color: #111827 !important;
  opacity: 1 !important;
}
.sidebar input:-ms-input-placeholder, .sidebar textarea:-ms-input-placeholder {
  color: #111827 !important;
  opacity: 1 !important;
}

/* Prevent LinkedIn styles from affecting our components */
.sidebar * {
  box-sizing: border-box !important;
  font-family: inherit !important;
  pointer-events: auto !important;
}

/* Ensure buttons are clickable */
.sidebar button {
  pointer-events: auto !important;
  cursor: pointer !important;
  user-select: none !important;
  margin: 8px 4px !important;
}

/* Ensure proper font inheritance */
.sidebar {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
}

.sidebar h1, .sidebar h2, .sidebar h3, .sidebar h4, .sidebar h5, .sidebar h6 {
  font-family: 'Saira', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
}

/* Ensure textboxes in AI controls section have appropriate minimum size */
.sidebar .ai-settings-container input[type="text"],
.sidebar .ai-settings-container input[type="password"],
.sidebar .ai-settings-container textarea,
.sidebar .ai-settings-container select {
  min-height: 36px !important;
  min-width: 120px !important;
  padding: 8px 12px !important;
  line-height: 1.4 !important;
}

.sidebar .ai-settings-container textarea {
  min-height: 72px !important;
  resize: vertical !important;
}

/* Specific height adjustments for Test and Save Configuration buttons */
.sidebar .ai-settings-container button[class*="px-3 py-2"],
.sidebar .ai-settings-container button[class*="px-4 py-2"] {
  padding-top: 4px !important;
  padding-bottom: 4px !important;
  min-height: 33px !important;
}

/* Specific styling for the AI/Manual toggle button */
.sidebar .ai-settings-container button[class*="h-5 w-9"] {
  /* Enforce stable size and shape in both states */
  height: 18px !important;
  min-height: 18px !important;
  max-height: 18px !important;
  width: 34px !important;
  min-width: 34px !important;
  padding: 2px !important;
  border-radius: 9999px !important;
  line-height: 0 !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  box-sizing: border-box !important;
  overflow: hidden !important;
  /* Smooth background/visual transitions to match logs expand feel */
  transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.sidebar .ai-settings-container button[class*="h-5 w-9"] span {
  /* Stable knob size */
  height: 14px !important;
  width: 14px !important;
  border-radius: 9999px !important;
  line-height: 0 !important;
  display: block !important;
  /* Smooth knob travel to mirror logs' smoothness */
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  will-change: transform;
}

/* Fix the translation positioning for the toggle */
.sidebar .ai-settings-container button[class*="h-5 w-9"] span[class*="translate-x-5"] {
  /* Travel equals (track width - padding*2 - knob width) = 34 - 4 - 14 = 16 */
  transform: translateX(16px) !important;
}

.sidebar .ai-settings-container button[class*="h-5 w-9"] span[class*="translate-x-1"] {
  /* Start aligned to left padding */
  transform: translateX(0px) !important;
}

/* Respect reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .sidebar .ai-settings-container button[class*="h-5 w-9"],
  .sidebar .ai-settings-container button[class*="h-5 w-9"] span {
    transition: none !important;
  }
}

/* Add margin between AI Model section and AI Prompts section */
.sidebar .ai-settings-container .space-y-3 .text-sm.font-semibold.text-gray-900 {
  margin-top: 24px !important;
}

/* Add margin between Reply Mode heading and description */
.sidebar .ai-settings-container .space-y-2 .text-sm.text-gray-500 {
  margin-top: 8px !important;
}

/* Controls.svelte - Input text boxes styling */
.sidebar input[type="number"] {
  padding: 6px 8px !important;
  margin: 4px 0 !important;
  min-height: 32px !important;
  font-size: 13px !important;
}

/* Controls.svelte - Pipeline Settings section spacing */
.sidebar .bg-white.rounded-xl .mb-3:has(.text-sm.font-medium.text-gray-800) {
  margin-bottom: 4px !important;
  margin-top: 8px !important;
}

/* Controls.svelte - Main control buttons styling */
.sidebar button[class*="bg-blue-600"] {
  padding: 8px 16px !important;
  margin: 4px 2px !important;
  min-height: 36px !important;
  font-size: 14px !important;
  border-radius: 12px !important;
}

.sidebar button[class*="bg-red-600"][class*="h-9 w-9"] {
  padding: 8px !important;
  margin: 4px 2px !important;
  min-height: 36px !important;
  min-width: 36px !important;
  border-radius: 12px !important;
}

/* Controls.svelte - Secondary action buttons styling */
.sidebar button[class*="bg-white hover:bg-gray-50"] {
  padding: 6px 12px !important;
  margin: 3px 2px !important;
  min-height: 32px !important;
  font-size: 12px !important;
  border-radius: 10px !important;
}

/* Controls.svelte - Reset session button styling */
.sidebar button[class*="text-red-600 bg-white hover:bg-red-50"] {
  padding: 6px 12px !important;
  margin: 3px 2px !important;
  min-height: 32px !important;
  font-size: 12px !important;
  border-radius: 10px !important;
}

/* Controls.svelte - Secondary Actions section margin */
.sidebar .bg-white.rounded-xl .space-y-2:last-child {
  margin-top: 16px !important;
}

/* Controls.svelte - Dialog buttons styling */
.sidebar button[class*="bg-white hover:bg-gray-50"][class*="h-9"] {
  padding: 6px 16px !important;
  margin: 4px 2px !important;
  min-height: 36px !important;
  font-size: 14px !important;
  border-radius: 12px !important;
}

.sidebar button[class*="bg-red-600 hover:bg-red-700"][class*="h-9"] {
  padding: 6px 16px !important;
  margin: 4px 2px !important;
  min-height: 36px !important;
  font-size: 14px !important;
  border-radius: 12px !important;
}

/* Controls.svelte - Status indicator (idle button) styling */
.sidebar .bg-white.rounded-xl .px-2.py-1.rounded-full.text-xs.font-medium.border {
  padding: 4px 8px !important;
  margin: 2px !important;
  min-height: 24px !important;
  font-size: 11px !important;
}

.sidebar .bg-white.rounded-xl .px-2.py-1.rounded-full .inline-block.h-2.w-2.rounded-full {
  height: 6px !important;
  width: 6px !important;
  margin-right: 4px !important;
}

/* LogsPanel.svelte - Filter buttons (ALL, DEBUG, INFO, WARN, ERROR) styling */
.sidebar button[class*="px-2 py-0.5"][class*="text-xs"][class*="rounded-full"] {
  padding: 4px 8px !important;
  margin: 1px !important;
  min-height: 24px !important;
  font-size: 11px !important;
  border-radius: 12px !important;
}

/* LogsPanel.svelte - Ensure filter buttons wrap within the card */
/* Container row for filters */
.sidebar section#logs .flex.flex-wrap.items-center.gap-2.mb-3 {
  width: 100% !important;
  max-width: 100% !important;
}
/* Inner buttons group should wrap to next line instead of overflowing */
.sidebar section#logs .flex.flex-wrap.items-center.gap-2.mb-3 > .flex.items-center {
  flex-wrap: wrap !important;
  width: 100% !important;
  gap: 0.25rem !important; /* tighten a bit so wrapping looks neat */
}
/* Make buttons flexible so they break lines naturally */
.sidebar section#logs .flex.flex-wrap.items-center.gap-2.mb-3 button {
  flex: 0 1 auto !important;
  max-width: 100% !important;
}

/* LogsPanel.svelte - Header action buttons (Clear logs, Expand/Collapse) styling */
.sidebar button[class*="px-2 py-1"][class*="text-sm"] {
  padding: 4px 8px !important;
  margin: 1px !important;
  min-height: 28px !important;
  font-size: 12px !important;
  border-radius: 6px !important;
}

/* LogsPanel.svelte - Search textbox styling */
.sidebar input[id="logs-search"] {
  padding: 10px 12px 10px 36px !important; /* extra padding for comfort and icon spacing */
  min-height: 36px !important;
  font-size: 13px !important;
}

/* Title overrides: make key section headers slightly larger and consistent */
.sidebar section#logs h2,
.sidebar section#ai-settings h2,
.sidebar section#controls h2,
.sidebar section#pipeline h2,
.sidebar section#counters h2 {
  font-size: 1.6rem !important; /* slightly bigger (Tailwind text-lg) */
  line-height: 1.5 !important;
}
